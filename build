#!/bin/bash

rm -rf fish kitty
cd .base && stow . && cd ..

source .scripts/packages

if [ "$1" == "clean" ]; then
  cd .base && stow --delete . && cd ..
  cd .linux && stow --delete . && cd ..
  cd .macos && stow --delete . && cd ..
else
  OS=$(uname -s | tr A-Z a-z)

  if [ "$OS" == "darwin" ]; then
    cd .macos && stow . && cd ..
    bash .scripts/get_brew
    brew upgrade
    brew install $brew_package_list
    cargo install $cargo_package_list
  fi
  if [ "$OS" == "linux" ]; then
    cd .linux && stow . && cd ..
  fi
fi
